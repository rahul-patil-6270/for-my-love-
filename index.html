<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For You ‚Äî I'm Sorry</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent: #f43f5e;
      --soft: rgba(244,63,94,0.08);
    }
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: linear-gradient(180deg,#fff7fb 0%, #fff 50%); }
    .handwritten { font-family: 'Parisienne', cursive; }
    /* floating petals/hearts */
    .float-wrap { pointer-events: none; position: fixed; inset: 0; overflow: hidden; z-index: 0; }
    .petal {
      position: absolute;
      width: 18px;
      height: 18px;
      background: radial-gradient(circle at 50% 30%, #fff 0 10%, #ff6b94 11% 40%, #f43f5e 60%);
      transform: rotate(45deg);
      opacity: .9;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      animation: fall linear infinite;
      mix-blend-mode: screen;
    }
    @keyframes fall {
      0% { transform: translateY(-10vh) rotate(0deg) scale(0.8); opacity:0; }
      10% { opacity: 1; }
      100% { transform: translateY(110vh) rotate(400deg) scale(1.1); opacity: .9; }
    }

    /* sticky note flip */
    .note {
      perspective: 1000px;
    }
    .note-inner {
      transform-style: preserve-3d;
      transition: transform .6s;
    }
    .note:hover .note-inner { transform: rotateY(180deg); }
    .note-face, .note-back {
      backface-visibility: hidden;
      position: absolute;
      inset: 0;
      border-radius: .5rem;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:1rem;
    }
    .note-back {
      transform: rotateY(180deg);
    }

    /* subtle entrance */
    .fade-up { transform: translateY(18px); opacity: 0; transition: all .6s cubic-bezier(.16,.84,.44,1); }
    .fade-up.in { transform: translateY(0); opacity: 1; }

    /* confetti canvas sits above background but below content */
    #confettiCanvas { position: fixed; inset: 0; pointer-events: none; z-index: 30; }

    /* small mobile tweaks */
    @media (max-width: 640px) {
      .petal { width: 12px; height:12px; }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 relative">

  <!-- Floating petals/hearts -->
  <div class="float-wrap" id="floatWrap" aria-hidden="true"></div>

  <!-- Confetti canvas -->
  <canvas id="confettiCanvas"></canvas>

  <!-- Main card -->
  <main class="relative z-40 w-full max-w-4xl bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl p-8 lg:p-12 border-[8px] border-purple-400">
    <header class="flex items-center gap-4">
      <div class="w-14 h-14 flex items-center justify-center rounded-xl bg-gradient-to-br from-pink-300 to-rose-400 text-white text-2xl">
        ‚ù§Ô∏è
      </div>
      <div>
        <h1 class="handwritten text-4xl lg:text-5xl text-rose-600 leading-none">For you, my love</h1>
        <p class="text-sm text-slate-600">A small page from me ‚Äî to say I‚Äôm sorry and to promise better days.</p>
      </div>
    </header>

    <section class="mt-6 grid gap-6 lg:grid-cols-2">
      <!-- Left: Apology card -->
      <div class="bg-white rounded-2xl p-6 shadow-md">
        <div>
          <p class="text-slate-500">I want to say</p>
          <h2 class="text-2xl font-semibold mt-2">Something from the heart</h2>

          <!-- typewriter area -->
          <div id="typewriterBox" class="mt-4 p-4 rounded-xl bg-rose-50 border border-rose-100 min-h-[120px] relative">
            <p id="typewriter" class="text-lg text-slate-700"></p>
            <div id="cursor" class="inline-block w-1 h-6 bg-rose-600 animate-pulse ml-1 align-middle"></div>
          </div>

          <!-- forgive button -->
          <div class="mt-5 flex items-center gap-3">
            <button id="forgiveBtn" class="px-5 py-2 rounded-full bg-rose-500 text-white font-medium shadow hover:scale-105 transition transform">
              Click to forgive me üíï
            </button>

            <a href="https://www.youtube.com/watch?v=2Vv-BfVoq4g" target="_blank" id="playAudioBtn" class="px-4 py-2 rounded-full bg-white border text-rose-600 border-rose-200 hover:bg-rose-50 transition inline-block">
                ‚ñ∂ Play gentle music
            </a>


          </div>

          <!-- small note -->
          <p class="mt-3 text-xs text-slate-500">You can click the music button to play a soft tune (I won't autoplay). Click forgive to see a surprise.</p>
        </div>
      </div>

      <!-- Right: Reasons + small preview of promises -->
      <div class="bg-white rounded-2xl p-6 shadow-md flex flex-col">
        <h3 class="text-lg font-semibold">Why I love you</h3>
        <p class="text-slate-500 mt-1">A few of the many reasons ‚Äî click Forgive to reveal them all.</p>

        <div id="reasonsPreview" class="mt-4 grid grid-cols-1 gap-3">
          <!-- preview cards inserted by JS -->
        </div>

        <div id="promisePreview" class="mt-6">
          <h4 class="text-sm font-medium text-rose-600">A promise</h4>
          <div id="singlePromisePreview" class="mt-2 p-3 bg-rose-50 rounded-xl text-slate-700">I promise to listen with my whole heart.</div>
        </div>
      </div>
    </section>

    <!-- Full reveals -->
    <section class="mt-8">
      <!-- Reasons grid -->
      <div id="reasonsSection" class="opacity-0 max-h-0 overflow-hidden transition-all duration-500">
        <h3 class="text-xl font-semibold text-slate-800">All the reasons I love you</h3>
        <p class="text-slate-500 mt-1">These are small truths I carry every day.</p>

        <div id="reasonsGrid" class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- reason cards injected -->
        </div>
      </div>

      <!-- Promise wall -->
      <div id="promiseSection" class="mt-8 opacity-0 max-h-0 overflow-hidden transition-all duration-500">
        <h3 class="text-xl font-semibold text-slate-800">My Promise Wall</h3>
        <p class="text-slate-500 mt-1">Notes I want to keep forever ‚Äî each promise is from my heart.</p>

        <div class="mt-4 grid grid-cols-2 sm:grid-cols-3 gap-4">
          <!-- sticky notes injected -->
        </div>
      </div>
    </section>

    <footer class="mt-8 text-center text-xs text-slate-500">
      Built with love by <span class="font-medium">me</span> ‚Äî I‚Äôm sorry, and I mean it.
    </footer>
  </main>

  <!-- Optional gentle audio (no autoplay) -->
  <audio id="softAudio" loop>
    <!-- No src set by default. You can set the src below to a soft mp3 file if you host one.
         e.g. document.getElementById('softAudio').src = 'path/to/your-soft-piano.mp3' 
    -->
  </audio>

<script>
/* -------------------------
   Data: change these lines
   ------------------------- */
const apologyText = [
  "I‚Äôm sorry for hurting you.",
  "I didn't mean to cause you pain.",
  "You are the most important person in my life.",
  "I will listen better, care better, and be better.",
  "Please forgive me ‚Äî let's heal together."
];

// A list of reasons (you can edit)
const reasons = [
  "Your laugh brightens my day.",
  "You are kind even when it's hard.",
  "You believe in me when I doubt.",
  "Your hugs feel like home.",
  "You make small moments magical.",
  "You push me to be my best.",
  "Your patience is a quiet superpower.",
  "You're beautiful inside and out.",
  "You create warmth wherever you go."
];

// Promises (sticky notes)
const promises = [
  "I promise to listen more.",
  "I promise to apologize without delay.",
  "I promise to keep my temper in check.",
  "I promise to help more with chores.",
  "I promise date nights every month.",
  "I promise to support your dreams.",
  "I promise to be honest and kind.",
  "I promise to be present when we talk.",
  "I promise to hold your hand through it all."
];

/* -------------------------
   Floating petals generator
   ------------------------- */
const floatWrap = document.getElementById('floatWrap');
function createPetals(count=26){
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'petal';
    const left = Math.random()*100;
    el.style.left = left + 'vw';
    el.style.animationDuration = (8 + Math.random()*8) + 's';
    el.style.animationDelay = (Math.random()*-10)+'s';
    el.style.opacity = 0.8 + Math.random()*0.2;
    el.style.transform = `rotate(${Math.random()*360}deg)`;
    el.style.top = (Math.random()*-30)+'vh';
    el.style.width = (10 + Math.random()*22)+'px';
    el.style.height = (10 + Math.random()*22)+'px';
    floatWrap.appendChild(el);
  }
}
createPetals();

/* -------------------------
   Typewriter effect
   ------------------------- */
const typeEl = document.getElementById('typewriter');
const cursor = document.getElementById('cursor');

let twIndex = 0;
let charIndex = 0;
let typing = true;
function startTypewriter(){
  if(twIndex >= apologyText.length) {
    // stop and keep last line
    return;
  }
  const current = apologyText[twIndex];
  const interval = setInterval(()=>{
    if(charIndex <= current.length){
      typeEl.textContent = current.slice(0,charIndex);
      charIndex++;
    } else {
      clearInterval(interval);
      twIndex++;
      charIndex = 0;
      setTimeout(()=> startTypewriter(), 900);
    }
  }, 40);
}
startTypewriter();

/* -------------------------
   Reasons preview (small)
   ------------------------- */
const reasonsPreview = document.getElementById('reasonsPreview');
reasons.slice(0,3).forEach(r=>{
  const card = document.createElement('div');
  card.className = 'p-3 rounded-lg border border-rose-50 bg-rose-25 text-slate-700 shadow-sm';
  card.innerHTML = `<div class="font-medium">${r}</div>`;
  reasonsPreview.appendChild(card);
});
document.getElementById('singlePromisePreview').textContent = promises[0];

/* -------------------------
   Forgive button -> reveal
   ------------------------- */
const forgiveBtn = document.getElementById('forgiveBtn');
const reasonsSection = document.getElementById('reasonsSection');
const reasonsGrid = document.getElementById('reasonsGrid');
const promiseSection = document.getElementById('promiseSection');
const promiseContainer = promiseSection.querySelector('.grid') || null;

function revealAll(){
  // confetti
  runConfetti();

  // reveal reasons
  reasonsSection.style.maxHeight = '1000px';
  reasonsSection.style.opacity = '1';
  setTimeout(()=> {
    document.querySelectorAll('#reasonsGrid .fade-up').forEach((el,i)=>{
      setTimeout(()=> el.classList.add('in'), i*80);
    });
  }, 120);

  // populate reasons grid
  reasonsGrid.innerHTML = '';
  reasons.forEach((r, i)=>{
    const card = document.createElement('div');
    card.className = 'bg-white rounded-xl p-4 shadow-sm border fade-up';
    card.innerHTML = `<div class="text-slate-800 font-medium">${r}</div>`;
    reasonsGrid.appendChild(card);
  });

  // promises
  promiseSection.style.maxHeight = '1000px';
  promiseSection.style.opacity = '1';
  // inject sticky notes grid
  const gridParent = document.querySelector('#promiseSection > div:nth-child(3)') || document.querySelector('#promiseSection');
  // We'll find the grid: it is the next element after the paragraphs in markup.
  const grid = document.querySelector('#promiseSection .mt-4.grid') || null;
  if(grid){
    grid.innerHTML = '';
    promises.forEach((p, i)=>{
      const noteWrap = document.createElement('div');
      noteWrap.className = 'note relative w-full h-32';
      noteWrap.innerHTML = `
        <div class="note-inner w-full h-full relative">
          <div class="note-face bg-yellow-50 p-3 border border-yellow-200 note-face">
            <div class="text-sm font-medium text-slate-800">${p}</div>
          </div>
          <div class="note-back bg-rose-50 p-3 border border-rose-100 note-back">
            <div class="text-sm text-rose-700 font-semibold">I mean this ‚ù§Ô∏è</div>
          </div>
        </div>
      `;
      grid.appendChild(noteWrap);
    });
  }

  // small UI changes
  forgiveBtn.textContent = "Thank you for reading üíñ";
  forgiveBtn.disabled = true;
}

// Attach click
forgiveBtn.addEventListener('click', ()=>{
  revealAll();
});

/* -------------------------
   Simple Confetti
   ------------------------- */
const canvas = document.getElementById('confettiCanvas');
const ctx = canvas.getContext('2d');
let confettiPieces = [];

function resizeCanvas(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function random(min,max){ return Math.random()*(max-min)+min; }
function createConfetti(count=80){
  confettiPieces = [];
  const colors = ['#ff6b94','#ffb3c6','#ffd9e2','#ffe6f0','#f43f5e','#ff8aa2'];
  for(let i=0;i<count;i++){
    confettiPieces.push({
      x: random(0, canvas.width),
      y: random(-canvas.height, 0),
      w: random(6,12),
      h: random(8,14),
      speed: random(1,4),
      rot: random(0,360),
      rotSpeed: random(-6,6),
      color: colors[Math.floor(Math.random()*colors.length)],
      opacity: random(0.8,1)
    });
  }
}

let confettiActive = false;
function runConfetti(){
  if(confettiActive) return;
  confettiActive = true;
  createConfetti(90);
  let duration = 2500; // ms
  let start = Date.now();
  function frame(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confettiPieces.forEach(p=>{
      p.y += p.speed;
      p.x += Math.sin((p.y/50))*2;
      p.rot += p.rotSpeed;
      // draw
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot * Math.PI/180);
      ctx.fillStyle = p.color;
      ctx.globalAlpha = p.opacity;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
    });
    if(Date.now() - start < duration){
      requestAnimationFrame(frame);
    } else {
      // fade out
      confettiActive = false;
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  }
  frame();
}

/* -------------------------
   Play gentle music button
   ------------------------- */
const playAudioBtn = document.getElementById('playAudioBtn');
const audio = document.getElementById('softAudio');
playAudioBtn.addEventListener('click', ()=> {
  // If user wants their own audio, they can set it in the console:
  // document.getElementById('softAudio').src = 'your-audio-url.mp3'
  if(!audio.src){
    // fallback: synth a gentle note using WebAudio for a few seconds
    try {
      const ac = new (window.AudioContext || window.webkitAudioContext)();
      const o = ac.createOscillator();
      const g = ac.createGain();
      o.type = 'sine';
      o.frequency.setValueAtTime(440, ac.currentTime);
      g.gain.setValueAtTime(0, ac.currentTime);
      g.gain.linearRampToValueAtTime(0.02, ac.currentTime + 0.02);
      o.connect(g);
      g.connect(ac.destination);
      o.start();
      o.frequency.exponentialRampToValueAtTime(660, ac.currentTime + 2.5);
      g.gain.exponentialRampToValueAtTime(0.0001, ac.currentTime + 3.5);
      setTimeout(()=> {
        o.stop();
        ac.close();
      }, 3800);
    } catch(e){
      alert('Audio not available on this device.');
    }
  } else {
    audio.play();
  }
});

/* -------------------------
   Small accessibility: Allow Enter key on forgive button
   ------------------------- */
forgiveBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') revealAll(); });

/* -------------------------
   Nice: gentle initial reveal animations for content that exists
   ------------------------- */
window.addEventListener('load', ()=>{
  // fade in some early elements
  document.querySelectorAll('.fade-up').forEach((el, i)=>{
    setTimeout(()=> el.classList.add('in'), 200 + i*80);
  });
});
</script>
</body>
</html>
